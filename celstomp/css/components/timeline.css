#tlPlayheadRow{
  touch-action: none;     
  -webkit-user-select: none;
  user-select: none;
}

#timeline{
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  height: var(--timeline-h);
  z-index: 10;

  background: var(--panel);
  border-top:1px solid var(--border);
  box-shadow: 0 -6px 16px rgba(0,0,0,.35);

  display:flex;
  flex-direction:column;
  min-height:0;
}

.app.tl-collapsed #timeline{ display:none; }

#timelineHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:8px 12px;
  color:#c7d0db;
  gap:10px;
  flex-wrap:wrap;
  position: relative;
}
#timelineHeader .left,
#timelineHeader .right{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}
#timelineHeader .center{
  flex: 1 1 auto;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
}


#timelineHeader #playBtn,
#timelineHeader #pauseBtn,
#timelineHeader #stopBtn,
#timelineHeader #prevFrame,
#timelineHeader #nextFrame,
#timelineHeader #jumpStart,
#timelineHeader #jumpEnd{ display:none; }

#timelineScroll{
  position:relative;
  overflow:auto;
  border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);
  flex:1;
  background: var(--panel2);
  min-height:0;
}

#timelineScroll{
  scrollbar-width: thin; 
  scrollbar-color: rgba(255,255,255,0.22) rgba(0,0,0,0.18);
}


#timelineScroll::-webkit-scrollbar{
  height: 12px;  
  width: 12px;   
}

#timelineScroll::-webkit-scrollbar-track{
  background: rgba(0,0,0,0.18);
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.06);
}

#timelineScroll::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,0.20);
  border-radius: 999px;
  border: 3px solid rgba(0,0,0,0.18); 
}

#timelineScroll::-webkit-scrollbar-thumb:hover{
  background: rgba(255,255,255,0.30);
}

#timelineScroll::-webkit-scrollbar-thumb:active{
  background: rgba(255,255,255,0.38);
}


#timelineScroll::-webkit-scrollbar-corner{
  background: rgba(0,0,0,0.18);
}


#playheadMarker,
#clipStartMarker,
#clipEndMarker{
  position:absolute;
  top:0;
  bottom:0;
  width:2px;
  pointer-events:none;
}


#playheadMarker{
  
  width: var(--frame-w);
  box-sizing: border-box; 
  background: color-mix(in srgb, var(--accent) 18%, transparent);
  border-left: 2px solid var(--accent);
  border-right: 2px solid var(--accent);
  z-index: 5;
  box-shadow: none;
}

#clipStartMarker{ background:#00e676; }
#clipEndMarker{ background:#ff5252; }


table#timelineTable{
  border-collapse: separate;
  border-spacing: 0;
  font-size:12px;
  color:#c7d0db;
  user-select:none;
}
#timelineTable td,
#timelineTable th{
  border:1px solid #1f2633;
  width: var(--frame-w);
  min-width: var(--frame-w);
  height: 28px;
  text-align:center;
  padding:0;
}
#timelineTable th.sticky{
  position: sticky;
  left: 0;
  z-index: 3;
  background: var(--sticky);
  border-right:1px solid var(--border);

  min-width: 200px;
  width:200px;
  text-align:left;
  padding:0 8px;
  font-weight:600;
}
#timelineTable tr.playhead-row td{
  border-top:1px solid #2a3240;
  border-bottom:1px solid #2a3240;
  border-left:none;
  border-right:none;
  background:#131821;
  color:var(--muted);
}
#timelineTable tr.playhead-row th.sticky{
  border:1px solid #2a3240;
}
#timelineTable tr.anim-row td{ background:#0f1319; }
#timelineTable tr.anim-row td.secondTick{ background:#101722; }
#timelineTable tr.anim-row td.hasContent{
  background:#214230;
  box-shadow: inset 0 0 0 2px rgba(24, 145, 60, 0.991);
}
#timelineTable tr.anim-row td.active{
  outline:2px solid var(--accent);
  outline-offset:-2px;
  box-shadow:
    inset 2px 0 0 var(--accent),
    inset -2px 0 0 var(--accent);
}


#timelineTable tr.anim-row td.active.hasContent{
  box-shadow:
    inset 0 0 0 2px rgba(64, 255, 121, 0.802),
    inset 2px 0 0 var(--accent),
    inset -2px 0 0 var(--accent);
}
#timelineTable td.dropTarget{
  outline:2px solid #ffcc00;
  outline-offset:-2px;
}

#timelineTable tr.anim-row td.selected{
  outline: 2px solid #00e5ff;
  outline-offset: -2px;
  background: #10212a;
}
#timelineTable tr.anim-row td.ghostTarget{
  outline: 2px dashed #00e5ff;
  outline-offset: -2px;
  background: rgba(0,229,255,.08);
}
body.dragging-cel #timelineTable tr.anim-row td.selected{
  opacity: .45;
}
#timelineTable tr.anim-row td.selected.hasContent{
  background: #0f2a24;
}
body.selecting-cels{
  cursor: crosshair;
  user-select: none;
}
body.dragging-cel{ cursor: grabbing; user-select:none; }


#timelineControlsBottom.tl-ctrls{
  display:flex;
  gap:8px;
  align-items:center;
  padding:8px 10px;
  border-top:1px solid #283241;
  background:#0c1117;
  position:sticky;
  bottom:0;
  z-index:2;
}
#timelineControlsBottom .spacer{ flex:1; }
#timelineControlsBottom button{
  padding:6px 10px;
  border-radius:8px;
  background:#131a22;
}
#timelineControlsBottom button:hover{ background:#1a222c; }

#inlineTlCtrls button{
  padding:4px 8px;
  border-radius:6px;
  background:#131a22;
}
#inlineTlCtrls button:hover{ background:#1a222c; }

#timelineHeader button,
#timelineHeader input[type="number"],
#timelineHeader .chip{ min-height:36px; }

.tlMobArrow{ display:none; }

@media (max-width: 900px){
  #timelineHeader .center,
  #timelineHeader .right{ gap: 8px; }
}

@media (max-width: 720px){
  #timeline{
    padding-bottom: env(safe-area-inset-bottom, 0px);
    height: calc(var(--timeline-h) + env(safe-area-inset-bottom, 0px));
  }
  #timelineScroll{
    -webkit-overflow-scrolling: touch;
  }

  .tlMobArrow{
    display: inline-flex;
    align-items: center;
    justify-content: center;

    width: 30px;
    height: 30px;
    padding: 0;

    border-radius: 10px;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 12;
  }

  .tlMobLeft{ left: 8px; }
  .tlMobRight{ right: 8px; }

  #timelineHeader{
    padding-left: 44px;
    padding-right: 44px;
  }

  #timelineHeader .left,
  #timelineHeader .right{
    display: none;
    position: absolute;
    bottom: calc(100% + 8px);
    z-index: 12;

    background: rgba(18, 20, 24, 0.96);
    border: 1px solid rgba(255,255,255,0.14);
    box-shadow: 0 18px 50px rgba(0,0,0,0.55);
    border-radius: 12px;
    padding: 10px;

    max-width: min(92vw, 360px);
  }

  #timelineHeader .left{
    left: 8px;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }

  #timelineHeader .right{
    right: 8px;
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }

  #timeline.mob-left-open #timelineHeader .left{ display: flex; }
  #timeline.mob-right-open #timelineHeader .right{ display: flex; }

  #timeline.mob-left-open  #tlMobLeftBtn,
  #timeline.mob-right-open #tlMobRightBtn{
    transform: translateY(-50%) rotate(180deg);
  }

  #timelineHeader .right button{
    padding: 6px 8px;
    border-radius: 8px;
  }
  #timelineHeader .right input[type="number"]{
    width: 64px !important;
    min-height: 32px;
  }
  
  #timelineHeader{
    padding: 6px 8px;
    gap: 6px;
  }
  #timelineHeader button{
    padding: 4px 6px;
    min-height: 28px;
    border-radius: 8px;
    font-size: 11px;
    line-height: 1;
  }

  #timelineHeader .badge{
    font-size: 10px;
    padding: 2px 7px;
  }

  #timelineHeader label{
    font-size: 11px;
  }

  #timelineHeader input[type="number"]{
    width: 54px !important;
    min-height: 28px;
    padding: 3px 6px;
    font-size: 11px;
  }

  #timelineHeader input[type="checkbox"]{
    transform: scale(0.9);
    transform-origin: left center;
  }
  table#timelineTable{ font-size: 11px; }
  #timelineTable td,
  #timelineTable th{ height: 24px; }
  #timelineTable th.sticky{
    width: 150px;
    min-width: 150px;
    font-size: 11px;
  }
}

@media (max-width: 480px){
  #timelineHeader .left strong{ font-size: 12px; }
  #timelineHeader input[type="number"]{
    width: 56px !important;
  }

  table#timelineTable{ font-size: 10px; }
  #timelineTable td,
  #timelineTable th{ height: 22px; }
  #timelineTable th.sticky{
    width: 130px;
    min-width: 130px;
  }
  
  #timelineHeader .center{
    gap: 6px;
  }
  #timelineHeader .center button{
    min-height: 36px;
    padding: 6px 8px;
  }
}
